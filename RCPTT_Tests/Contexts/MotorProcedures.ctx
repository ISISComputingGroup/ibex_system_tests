--- RCPTT testcase ---
Format-Version: 1.0
Context-Type: org.eclipse.rcptt.ctx.ecl
Element-Name: MotorProcedures
Element-Type: context
Element-Version: 2.0
Id: _FsR8cEm2Eeamaaa2qvREOQ
Runtime-Version: 2.1.0.201606221726
Save-Time: 10/19/17 7:37 PM

------=_.ecl.context-718f04b4-ed39-33e3-af62-0995e4561998
Content-Type: text/ecl
Entry-Name: .ecl.context

proc wait_for_opi_to_exist [val name] {
	try -command {
		get-view $name
		bool true
	} -catch {
		bool false
	}
}

proc assert_wait_for_opi_to_be_closed [val name] {
	wait 1000 //Dialog takes some time to display

	try -times 100 -delay 200 -command {
		if [wait_for_opi_to_exist $name] {
			bool true | verify-false
		}
	}
}

proc configure_galil [val galilname] [val galilmacro] [val window -input true] {
	add_ioc -ioc_name $galilname -window $window
	log -message "config" 
	add_ioc_macro $galilmacro "1.2.3.4"
	log -message "add macro"
	add_autostart_and_recsim_to_ioc -iocname $galilname -window $window
	log -message "autostart"
}

proc add_autostart_and_recsim_to_ioc [val iocname] [val window] {
    edit_ioc -ioc_name $iocname -window $window
	with [get_ioc_dialog] {
		get-button "Auto-Start" | check
    	get-combo -after [get-label "Sim. Level"] | select RECSIM
    	get-button OK | check_enabled_and_click
    }    
}
------=_.ecl.context-718f04b4-ed39-33e3-af62-0995e4561998--
